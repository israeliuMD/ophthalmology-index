<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>סטטיסטיקות אישיות - בחינות מחלות עיניים</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
      direction: rtl;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .control-btn {
      padding: 8px 16px;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }
    
    .control-btn:hover {
      background-color: #3a7bc8;
    }
    
    .control-btn.active {
      background-color: #2c5aa0;
    }
    
    .stats-overview {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      border-left: 4px solid #4a90e2;
    }
    
    .stat-number {
      font-size: 2em;
      font-weight: bold;
      color: #4a90e2;
      margin-bottom: 10px;
    }
    
    .stat-label {
      color: #666;
      font-size: 0.9em;
    }
    
    .book-stats {
      margin-bottom: 30px;
    }
    
    .book-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background-color: #4a90e2;
      color: white;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
    }
    
    .book-title {
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .book-summary {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    
    .book-content {
      background-color: white;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 8px 8px;
      overflow: hidden;
    }
    
    .book-content.collapsed {
      display: none;
    }
    
    .exam-row {
      display: grid;
      grid-template-columns: 1fr 100px 100px 100px 120px;
      gap: 15px;
      padding: 15px;
      border-bottom: 1px solid #eee;
      align-items: center;
    }
    
    .exam-row:last-child {
      border-bottom: none;
    }
    
    .exam-row.header {
      background-color: #f8f9fa;
      font-weight: bold;
    }
    
    .progress-bar {
      width: 100%;
      height: 20px;
      background-color: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background-color: #4caf50;
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.8em;
      font-weight: bold;
    }
    
    .progress-fill.low {
      background-color: #f44336;
    }
    
    .progress-fill.medium {
      background-color: #ff9800;
    }
    
    .loading {
      text-align: center;
      padding: 50px;
      color: #666;
    }
    
    .no-data {
      text-align: center;
      padding: 50px;
      color: #999;
    }
    
    .toggle-arrow {
      transition: transform 0.3s ease;
    }
    
    .toggle-arrow.collapsed {
      transform: rotate(-90deg);
    }
    
    .view-tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      gap: 10px;
    }
    
    .tab-btn {
      padding: 10px 20px;
      background-color: #f0f0f0;
      color: #666;
      border: none;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.3s ease;
    }
    
    .tab-btn.active {
      background-color: #4a90e2;
      color: white;
    }
    
    .tab-btn:hover:not(.active) {
      background-color: #e0e0e0;
    }
    
    .view-content {
      display: none;
    }
    
    .view-content.active {
      display: block;
    }
    
    .exam-detail {
      margin-bottom: 30px;
    }
    
    .exam-detail-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background-color: #4caf50;
      color: white;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
    }
    
    .exam-detail-title {
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .exam-detail-summary {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    
    .exam-detail-content {
      background-color: white;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 8px 8px;
      overflow: hidden;
    }
    
    .book-row {
      display: grid;
      grid-template-columns: 2fr 100px 100px 100px 120px;
      gap: 15px;
      padding: 15px;
      border-bottom: 1px solid #eee;
      align-items: center;
    }
    
    .book-row:last-child {
      border-bottom: none;
    }
    
    .book-row.header {
      background-color: #f8f9fa;
      font-weight: bold;
    }
    
    .file-upload-section {
      background-color: #f0f8ff;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      text-align: center;
    }
    
    .file-input-wrapper {
      display: inline-block;
      position: relative;
    }
    
    .file-input {
      display: none;
    }
    
    .file-label {
      display: inline-block;
      padding: 10px 20px;
      background-color: #ff9800;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 10px;
    }
    
    .file-label:hover {
      background-color: #e68a00;
    }
    
    .file-list {
      margin-top: 20px;
      text-align: right;
    }
    
    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background-color: white;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    
    .remove-file {
      color: #f44336;
      cursor: pointer;
      font-weight: bold;
    }
    
    .debug-panel {
      background-color: #f0f0f0;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 0.9em;
      display: none;
    }
    
    @media (max-width: 768px) {
      .exam-row, .book-row {
        grid-template-columns: 1fr;
        gap: 10px;
        text-align: center;
      }
      
      .book-summary, .exam-detail-summary {
        flex-direction: column;
        gap: 10px;
      }
      
      .stats-overview {
        grid-template-columns: 1fr;
      }
      
      .view-tabs {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>סטטיסטיקות אישיות - בחינות מחלות עיניים</h1>
    
    <div class="controls">
      <button class="control-btn" onclick="window.open('https://israeliumd.github.io/ophthalmology-index/', '_blank')">חזרה לאינדקס</button>
      <button class="control-btn" onclick="refreshData()">רענן נתונים</button>
      <button class="control-btn" onclick="expandAll()">הרחב הכל</button>
      <button class="control-btn" onclick="collapseAll()">כווץ הכל</button>
      <button class="control-btn" onclick="toggleDebug()">הצג מידע טכני</button>
      <button class="control-btn" onclick="clearAllData()" style="background-color: #f44336;">מחק הכל</button>
    </div>
    
    <div class="file-upload-section">
      <h3>טען קבצי JSON של בחינות שמורות</h3>
      <div class="file-input-wrapper">
        <input type="file" id="file-input" class="file-input" accept=".json" multiple onchange="handleFileSelect(event)">
        <label for="file-input" class="file-label">בחר קבצי JSON</label>
      </div>
      <div id="file-list" class="file-list"></div>
    </div>
    
    <div id="debug-panel" class="debug-panel">
      <h3>מידע טכני לפתרון בעיות:</h3>
      <div id="debug-content"></div>
    </div>
    
    <div class="view-tabs">
      <button class="tab-btn active" onclick="switchView('books')" id="books-tab">סטטיסטיקות לפי נושא</button>
      <button class="tab-btn" onclick="switchView('exams')" id="exams-tab">סטטיסטיקות לפי בחינה</button>
    </div>
    
    <div id="loading" class="loading">
      טוען נתונים...
    </div>
    
    <div id="stats-content" style="display: none;">
      <div class="stats-overview" id="overview-stats">
        <!-- Overview statistics will be inserted here -->
      </div>
      
      <div class="view-content active" id="books-view">
        <div id="book-statistics">
          <!-- Book statistics will be inserted here -->
        </div>
      </div>
      
      <div class="view-content" id="exams-view">
        <div id="exam-statistics">
          <!-- Exam statistics will be inserted here -->
        </div>
      </div>
    </div>
    
    <div id="no-data" class="no-data" style="display: none;">
      לא נמצאו נתוני בחינות - נא לטעון קבצי JSON של בחינות שמורות
    </div>
  </div>

  <script>
    // Exam configurations with references mapping
    const examConfigs = {
      '06-2020': {
        title: 'מועד 06.2020',
        totalQuestions: 150,
        correctAnswers: {} // Will be populated from references
      },
      '06-2021': {
        title: 'מועד 06.2021',
        totalQuestions: 150,
        correctAnswers: {}
      },
      '06-2022': {
        title: 'מועד 06.2022',
        totalQuestions: 150,
        correctAnswers: {}
      },
      '06-2023': {
        title: 'מועד 06.2023',
        totalQuestions: 150,
        correctAnswers: {}
      },
      '05-2024': {
        title: 'מועד 05.2024',
        totalQuestions: 150,
        correctAnswers: {}
      },
      '09-2024': {
        title: 'מועד 09.2024',
        totalQuestions: 150,
        correctAnswers: {}
      }
    };

    // Book names mapping
    const bookNames = {
      2: 'FUNDAMENTALS',
      3: 'OPTICS',
      4: 'PATHOLOGY',
      5: 'NEURO',
      6: 'PEDIATRICS',
      7: 'OCULOPLASTICS',
      8: 'CORNEA',
      9: 'UVEITIS',
      10: 'GLAUCOMA',
      11: 'CATARACT',
      12: 'RETINA',
      13: 'REFRACTIVE'
    };

    // Question to book mapping based on PDF references
    const questionBookMapping = {
      '06-2020': {
                1:  {book: 4,  answers: ['א']},
        2:  {book: 4,  answers: ['א']},
        3:  {book: 4,  answers: ['ב']},
        4:  {book: 4,  answers: ['ג']},
        5:  {book: 4,  answers: ['ד']},
        6:  {book: 4,  answers: ['ב']},
        7:  {book: 4,  answers: ['ד']},
        8:  {book: 4,  answers: ['א']},
        9:  {book: 4,  answers: ['א']},
        10: {book: 4,  answers: ['ב']},
        11: {book: 4,  answers: ['ג']},
        12: {book: 4,  answers: ['א']},
        13: {book: 4,  answers: ['ג']},
        14: {book: 4,  answers: ['ג']},
        15: {book: 4,  answers: ['ג']},
        16: {book: 4,  answers: ['ב']},
        17: {book: 3,  answers: ['ב']},
        18: {book: 3,  answers: ['ג']},
        19: {book: 3,  answers: ['א']},
        20: {book: 3,  answers: ['ג']},
        21: {book: 3,  answers: ['ד']},
        22: {book: 3,  answers: ['ג']},
        23: {book: 3,  answers: ['א']},
        24: {book: 3,  answers: ['ד']},
        25: {book: 3,  answers: ['ב']},
        26: {book: 3,  answers: ['ד']},
        27: {book: 3,  answers: ['א']},
        28: {book: 3,  answers: ['ד']},
        29: {book: 3,  answers: ['ב']},
        30: {book: 3,  answers: ['ג']},
        31: {book: 3,  answers: ['א']},
        32: {book: 3,  answers: ['ב']},
        33: {book: 2,  answers: ['ב']},
        34: {book: 2,  answers: ['א']},
        35: {book: 2,  answers: ['ד']},
        36: {book: 2,  answers: ['ג']},
        37: {book: 2,  answers: ['ד']},
        38: {book: 2,  answers: ['א']},
        39: {book: 2,  answers: ['ג']},
        40: {book: 2,  answers: ['א', 'ב', 'ג', 'ד']},          // נפסלה
        41: {book: 2,  answers: ['א']},
        42: {book: 2,  answers: ['ג']},
        43: {book: 2,  answers: ['א', 'ב', 'ג', 'ד']},          // נפסלה
        44: {book: 2,  answers: ['ג']},
        45: {book: 2,  answers: ['ב']},
        46: {book: 2,  answers: ['ג']},
        47: {book: 2,  answers: ['א']},
        48: {book: 2,  answers: ['א']},
        49: {book: 2,  answers: ['א']},
        50: {book: 2,  answers: ['ב']},
        51: {book: 2,  answers: ['ג']},
        52: {book: 2,  answers: ['ב']},
        53: {book: 2,  answers: ['ב']},
        54: {book: 2,  answers: ['ג']},
        55: {book: 2,  answers: ['א']},
        56: {book: 2,  answers: ['א']},
        57: {book: 2,  answers: ['א']},
        58: {book: 2,  answers: ['ב','ד']},
        59: {book: 2,  answers: ['א', 'ב', 'ג', 'ד']},          // נפסלה
        60: {book: 2,  answers: ['ג']},
        61: {book: 6,  answers: ['ד']},
        62: {book: 6,  answers: ['ב','ד']},
        63: {book: 6,  answers: ['א']},
        64: {book: 6,  answers: ['ג']},
        65: {book: 6,  answers: ['ג']},
        66: {book: 6,  answers: ['ב']},
        67: {book: 6,  answers: ['א']},
        68: {book: 6,  answers: ['ד']},
        69: {book: 6,  answers: ['ב']},
        70: {book: 6,  answers: ['ד']},
        71: {book: 7,  answers: ['ב']},
        72: {book: 7,  answers: ['ג']},
        73: {book: 7,  answers: ['א']},
        74: {book: 7,  answers: ['ד']},
        75: {book: 7,  answers: ['ב']},
        76: {book: 7,  answers: ['א']},
        77: {book: 7,  answers: ['ד']},
        78: {book: 7,  answers: ['ד']},
        79: {book: 7,  answers: ['א']},
        80: {book: 7,  answers: ['ג']},
        81: {book: 5,  answers: ['ד']},
        82: {book: 5,  answers: ['ב']},
        83: {book: 5,  answers: ['ד']},
        84: {book: 5,  answers: ['ד']},
        85: {book: 5,  answers: ['ד']},
        86: {book: 5,  answers: ['ד']},
        87: {book: 5,  answers: ['א']},
        88: {book: 5,  answers: ['ב']},
        89: {book: 5,  answers: ['ג']},
        90: {book: 5,  answers: ['ד']},
        91: {book: 8,  answers: ['א']},
        92: {book: 8,  answers: ['ד']},
        93: {book: 8,  answers: ['ג']},
        94: {book: 8,  answers: ['ב']},
        95: {book: 8,  answers: ['א']},
        96: {book: 8,  answers: ['ד']},
        97: {book: 8,  answers: ['ג']},
        98: {book: 8,  answers: ['ד']},
        99: {book: 8,  answers: ['ג']},
        100:{book: 13, answers: ['ב']},
        101:{book: 13, answers: ['ב']},
        102:{book: 13, answers: ['ב']},
        103:{book: 13, answers: ['א']},
        104:{book: 13, answers: ['א']},
        105:{book: 13, answers: ['ב']},
        106:{book: 13, answers: ['א','ד']},
        107:{book: 13, answers: ['ג']},
        108:{book: 13, answers: ['ג']},
        109:{book: 10, answers: ['ב']},
        110:{book: 10, answers: ['ב']},
        111:{book: 10, answers: ['ג']},
        112:{book: 10, answers: ['ב']},
        113:{book: 10, answers: ['ב']},
        114:{book: 10, answers: ['א']},
        115:{book: 10, answers: ['ג']},
        116:{book: 10, answers: ['ג']},
        117:{book: 10, answers: ['ג']},
        118:{book: 10, answers: ['ג']},
        119:{book: 11, answers: ['א']},
        120:{book: 11, answers: ['ד']},
        121:{book: 11, answers: ['ב']},
        122:{book: 11, answers: ['ג']},
        123:{book: 11, answers: ['ב']},
        124:{book: 11, answers: ['ד']},
        125:{book: 11, answers: ['א']},
        126:{book: 11, answers: ['א']},
        127:{book: 11, answers: ['ד']},
        128:{book: 11, answers: ['ב']},
        129:{book: 12, answers: ['ב']},
        130:{book: 12, answers: ['ד']},
        131:{book: 12, answers: ['ד']},
        132:{book: 12, answers: ['ב']},
        133:{book: 12, answers: ['ב']},
        134:{book: 12, answers: ['ב']},
        135:{book: 12, answers: ['ג']},
        136:{book: 12, answers: ['ב']},
        137:{book: 12, answers: ['ג','ד']},
        138:{book: 12, answers: ['א']},
        139:{book: 12, answers: ['א']},
        140:{book: 12, answers: ['ד']},
        141:{book: 12, answers: ['ב']},
        142:{book: 12, answers: ['ג']},
        143:{book: 9,  answers: ['ב']},
        144:{book: 9,  answers: ['ד']},
        145:{book: 9,  answers: ['ב']},
        146:{book: 9,  answers: ['ג']},
        147:{book: 9,  answers: ['ד']},
        148:{book: 9,  answers: ['ג']},
        149:{book: 9,  answers: ['ד']},
        150:{book: 9,  answers: ['ד']},

      },
      '06-2021': {
        1: {book: 2, answers: ['ג']},
        2: {book: 2, answers: ['א']},
        3: {book: 2, answers: ['ג']},
        4: {book: 2, answers: ['ג']},
        5: {book: 2, answers: ['ד']},
        6: {book: 2, answers: ['ג']},
        7: {book: 2, answers: ['ב']},
        8: {book: 2, answers: ['ב']},
        9: {book: 2, answers: ['ג']},
        10: {book: 2, answers: ['ג']},
        11: {book: 2, answers: ['ג']},
        12: {book: 2, answers: ['ג', 'ד']}, // Multiple accepted answers
        13: {book: 2, answers: ['ג']},
        14: {book: 2, answers: ['ב']},
        15: {book: 2, answers: ['א']},
        16: {book: 2, answers: ['ד']},
        17: {book: 2, answers: ['א']},
        18: {book: 2, answers: ['ב']},
        19: {book: 2, answers: ['ד']},
        20: {book: 2, answers: ['ג']},
        21: {book: 2, answers: ['ב']},
        22: {book: 2, answers: ['ג']},
        23: {book: 2, answers: ['ג']},
        24: {book: 2, answers: ['ד']},
        25: {book: 2, answers: ['ב']},
        26: {book: 2, answers: ['ג']},
        27: {book: 2, answers: ['ג']},
        28: {book: 2, answers: ['א']},
        29: {book: 3, answers: ['ב']},
        30: {book: 3, answers: ['א']},
        31: {book: 3, answers: ['א']},
        32: {book: 3, answers: ['ד']},
        33: {book: 3, answers: ['ג']},
        34: {book: 3, answers: ['ב']},
        35: {book: 3, answers: ['א']},
        36: {book: 3, answers: ['א']},
        37: {book: 3, answers: ['ד']},
        38: {book: 3, answers: ['א']},
        39: {book: 3, answers: ['ד']},
        40: {book: 3, answers: ['א']},
        41: {book: 3, answers: ['ג']},
        42: {book: 3, answers: ['ד']},
        43: {book: 3, answers: ['ג']},
        44: {book: 3, answers: ['א']},
        45: {book: 4, answers: ['ג']},
        46: {book: 4, answers: ['ג']},
        47: {book: 4, answers: ['ב']},
        48: {book: 4, answers: ['ג']},
        49: {book: 4, answers: ['ב']},
        50: {book: 4, answers: ['ב']},
        51: {book: 4, answers: ['ד']},
        52: {book: 4, answers: ['ב']},
        53: {book: 4, answers: ['ב']},
        54: {book: 4, answers: ['ד']},
        55: {book: 4, answers: ['ב']},
        56: {book: 8, answers: ['ב', 'ד']}, // Multiple accepted answers
        57: {book: 4, answers: ['ג']},
        58: {book: 4, answers: ['א']},
        59: {book: 4, answers: ['ב']},
        60: {book: 4, answers: ['ד']},
        61: {book: 5, answers: ['ג']},
        62: {book: 5, answers: ['א']},
        63: {book: 5, answers: ['ג']},
        64: {book: 5, answers: ['ג', 'ד']}, // Multiple accepted answers
        65: {book: 5, answers: ['א']},
        66: {book: 5, answers: ['א', 'ב', 'ג', 'ד']}, // All answers accepted
        67: {book: 5, answers: ['ד']},
        68: {book: 5, answers: ['ג']},
        69: {book: 5, answers: ['ג', 'ד']}, // Multiple accepted answers
        70: {book: 5, answers: ['א']},
        71: {book: 6, answers: ['ג']},
        72: {book: 6, answers: ['א']},
        73: {book: 6, answers: ['א']},
        74: {book: 6, answers: ['ד']},
        75: {book: 6, answers: ['ב']},
        76: {book: 6, answers: ['ג']},
        77: {book: 6, answers: ['א']},
        78: {book: 6, answers: ['ב']},
        79: {book: 6, answers: ['ד']},
        80: {book: 6, answers: ['ג']},
        81: {book: 7, answers: ['ב']},
        82: {book: 7, answers: ['ד']},
        83: {book: 7, answers: ['ג']},
        84: {book: 7, answers: ['ג']},
        85: {book: 7, answers: ['א']},
        86: {book: 7, answers: ['א']},
        87: {book: 7, answers: ['ד']},
        88: {book: 7, answers: ['ד']},
        89: {book: 7, answers: ['ב']},
        90: {book: 7, answers: ['א']},
        91: {book: 8, answers: ['א']},
        92: {book: 8, answers: ['ד']},
        93: {book: 8, answers: ['ב']},
        94: {book: 8, answers: ['ד']},
       95: {book: 8, answers: ['א']},
       96: {book: 8, answers: ['ג']},
       97: {book: 8, answers: ['א']},
       98: {book: 8, answers: ['ד']},
       99: {book: 8, answers: ['ג']},
       100: {book: 8, answers: ['ב']},
       101: {book: 9, answers: ['ב']},
       102: {book: 9, answers: ['ב']},
       103: {book: 9, answers: ['ד']},
       104: {book: 9, answers: ['א']},
       105: {book: 9, answers: ['ד']},
       106: {book: 9, answers: ['ג']},
       107: {book: 9, answers: ['ג']},
       108: {book: 9, answers: ['ג']},
       109: {book: 10, answers: ['ג']},
       110: {book: 10, answers: ['ג']},
       111: {book: 10, answers: ['א', 'ב', 'ג', 'ד']}, // All answers accepted
       112: {book: 10, answers: ['ג']},
       113: {book: 10, answers: ['א']},
       114: {book: 10, answers: ['ב']},
       115: {book: 10, answers: ['ג']},
       116: {book: 10, answers: ['ד']},
       117: {book: 10, answers: ['ב']},
       118: {book: 10, answers: ['א']},
       119: {book: 11, answers: ['ג']},
       120: {book: 11, answers: ['א']},
       121: {book: 11, answers: ['ב']},
       122: {book: 11, answers: ['ד']},
       123: {book: 11, answers: ['ב']},
       124: {book: 11, answers: ['ד']},
       125: {book: 11, answers: ['א']},
       126: {book: 11, answers: ['א']},
       127: {book: 11, answers: ['ד']},
       128: {book: 11, answers: ['ג']},
       129: {book: 12, answers: ['ב']},
       130: {book: 12, answers: ['ג']},
       131: {book: 12, answers: ['ג']},
       132: {book: 12, answers: ['ג']},
       133: {book: 12, answers: ['ג']},
       134: {book: 12, answers: ['ד']},
       135: {book: 12, answers: ['ג']},
       136: {book: 12, answers: ['ד']},
       137: {book: 12, answers: ['ג']},
       138: {book: 12, answers: ['א']},
       139: {book: 12, answers: ['ב']},
       140: {book: 12, answers: ['ב']},
       141: {book: 12, answers: ['ג']},
       142: {book: 12, answers: ['ב']},
       143: {book: 13, answers: ['ג']},
       144: {book: 13, answers: ['ד']},
       145: {book: 13, answers: ['א']},
       146: {book: 13, answers: ['ג']},
       147: {book: 13, answers: ['א']},
       148: {book: 13, answers: ['א']},
       149: {book: 13, answers: ['ד']},
       150: {book: 13, answers: ['ג']}
     },
     '06-2022': {
       // Add mapping for 06-2022 based on the PDF
       1: {book: 2, answers: ['א']},
       2: {book: 2, answers: ['ג']},
       3: {book: 2, answers: ['א']},
       4: {book: 2, answers: ['ג']},
       5: {book: 2, answers: ['ב']},
       6: {book: 2, answers: ['ג']},
       7: {book: 2, answers: ['ד']},
       8: {book: 2, answers: ['ב']},
       9: {book: 2, answers: ['ב']},
       10: {book: 2, answers: ['ג']},
       11: {book: 2, answers: ['ג']},
      12: {book: 2, answers: ['ג']},
      13: {book: 2, answers: ['א']},
      14: {book: 2, answers: ['ב']},
      15: {book: 2, answers: ['ד']},
      16: {book: 2, answers: ['ג']},
      17: {book: 2, answers: ['א']},
      18: {book: 2, answers: ['ג']},
      19: {book: 2, answers: ['ד']},
      20: {book: 2, answers: ['ג']},
      21: {book: 2, answers: ['א']},
      22: {book: 2, answers: ['ג']},
      23: {book: 2, answers: ['ג']},
      24: {book: 2, answers: ['א']},
      25: {book: 2, answers: ['ב']},
      26: {book: 2, answers: ['ד']},
      27: {book: 2, answers: ['ג']},
      28: {book: 2, answers: ['א']},
      29: {book: 3, answers: ['א']},
      30: {book: 3, answers: ['ד']},
      31: {book: 3, answers: ['ד']},
      32: {book: 3, answers: ['ב']},
      33: {book: 3, answers: ['ד']},
      34: {book: 3, answers: ['ג']},
      35: {book: 3, answers: ['ב']},
      36: {book: 3, answers: ['ג']},
      37: {book: 3, answers: ['א']},
      38: {book: 3, answers: ['ד']},
      39: {book: 3, answers: ['א']},
      40: {book: 3, answers: ['ב']},
      41: {book: 3, answers: ['ד']},
      42: {book: 3, answers: ['ג']},
      43: {book: 3, answers: ['ד']},
      44: {book: 3, answers: ['ב']},
      45: {book: 4, answers: ['א']},
      46: {book: 4, answers: ['ד']},
      47: {book: 4, answers: ['ד']},
      48: {book: 4, answers: ['ג']},
      49: {book: 4, answers: ['ד']},
      50: {book: 4, answers: ['ב']},
      51: {book: 4, answers: ['א']},
      52: {book: 4, answers: ['ג']},
      53: {book: 4, answers: ['ד']},
      54: {book: 4, answers: ['ב']},
      55: {book: 4, answers: ['ג']},
      56: {book: 4, answers: ['א']},
      57: {book: 4, answers: ['ד']},
      58: {book: 4, answers: ['א']},
      59: {book: 4, answers: ['ד']},
      60: {book: 4, answers: ['ב']},
      61: {book: 5, answers: ['ג']},
      62: {book: 5, answers: ['ד']},
      63: {book: 5, answers: ['א']},
      64: {book: 5, answers: ['ג']},
      65: {book: 5, answers: ['ג']},
      66: {book: 5, answers: ['ג']},
      67: {book: 5, answers: ['ב']},
      68: {book: 5, answers: ['א']},
      69: {book: 5, answers: ['ב']},
      70: {book: 5, answers: ['ד']},
      71: {book: 6, answers: ['ג']},
      72: {book: 6, answers: ['א']},
      73: {book: 6, answers: ['ד']},
      74: {book: 6, answers: ['ב']},
      75: {book: 6, answers: ['ג']},
      76: {book: 6, answers: ['ב']},
      77: {book: 6, answers: ['ב']},
      78: {book: 6, answers: ['א']},
      79: {book: 6, answers: ['ד']},
      80: {book: 6, answers: ['ב']},
      81: {book: 7, answers: ['ג']},
      82: {book: 7, answers: ['ב']},
      83: {book: 7, answers: ['ב']},
      84: {book: 7, answers: ['ד']},
      85: {book: 7, answers: ['ד']},
      86: {book: 7, answers: ['א']},
      87: {book: 7, answers: ['ב']},
      88: {book: 7, answers: ['ג']},
      89: {book: 7, answers: ['ד']},
      90: {book: 7, answers: ['א']},
        91:  {book: 8,  answers: ['ג']},
        92:  {book: 8,  answers: ['ד']},
        93:  {book: 8,  answers: ['ג']},
        94:  {book: 8,  answers: ['ב']},
        95:  {book: 8,  answers: ['א']},
        96:  {book: 8,  answers: ['ג']},
        97:  {book: 8,  answers: ['א']},
        98:  {book: 8,  answers: ['ב']},
        99:  {book: 8,  answers: ['ד']},
        100: {book: 8,  answers: ['ב']},
        101: {book: 9,  answers: ['ד']},
        102: {book: 9,  answers: ['ב']},
        103: {book: 9,  answers: ['א']},
        104: {book: 9,  answers: ['ד']},
        105: {book: 9,  answers: ['א']},
        106: {book: 9,  answers: ['ב']},
        107: {book: 9,  answers: ['ד']},
        108: {book: 9,  answers: ['ג']},
        109: {book: 10, answers: ['ג']},
        110: {book: 10, answers: ['א']},
        111: {book: 10, answers: ['ד']},
        112: {book: 10, answers: ['א']},
        113: {book: 10, answers: ['ג']},
        114: {book: 10, answers: ['ד']},
        115: {book: 10, answers: ['ב']},
        116: {book: 10, answers: ['ד']},
        117: {book: 10, answers: ['ג']},
        118: {book: 10, answers: ['ב']},
        119: {book: 11, answers: ['ב']},
        120: {book: 11, answers: ['ב']},
        121: {book: 11, answers: ['ב']},
        122: {book: 11, answers: ['ב']},
        123: {book: 11, answers: ['א']},
        124: {book: 11, answers: ['ג']},
        125: {book: 11, answers: ['א']},
        126: {book: 11, answers: ['ב']},
        127: {book: 11, answers: ['ד']},
        128: {book: 11, answers: ['ב']},
        129: {book: 12, answers: ['ג']},
        130: {book: 12, answers: ['א']},
        131: {book: 12, answers: ['א']},
        132: {book: 12, answers: ['ד']},
        133: {book: 12, answers: ['ג']},
        134: {book: 12, answers: ['ג']},
        135: {book: 12, answers: ['ד']},
        136: {book: 12, answers: ['ג']},
        137: {book: 12, answers: ['ד']},
        138: {book: 12, answers: ['ג']},
        139: {book: 12, answers: ['ב']},
        140: {book: 12, answers: ['ב']},
        141: {book: 12, answers: ['ג']},
        142: {book: 12, answers: ['ב']},
        143: {book: 13, answers: ['א']},
        144: {book: 13, answers: ['א']},
        145: {book: 13, answers: ['א']},
        146: {book: 13, answers: ['ג']},
        147: {book: 13, answers: ['א']},
        148: {book: 13, answers: ['ד']},
        149: {book: 13, answers: ['ד']},
        150: {book: 13, answers: ['ג']}

       // Continue with all 150 questions...
     },
     '06-2023': {
       // Add mapping for 06-2023 based on the PDF
        1:  {book: 13, answers: ['ד']},
        2:  {book: 3,  answers: ['א']},
        3:  {book: 12, answers: ['ד']},
        4:  {book: 2,  answers: ['ג']},
        5:  {book: 3,  answers: ['ג']},
        6:  {book: 11, answers: ['א']},
        7:  {book: 8,  answers: ['א']},
        8:  {book: 3,  answers: ['א']},
        9:  {book: 2,  answers: ['ב']},
        10: {book: 3,  answers: ['ג']},
        11: {book: 2,  answers: ['ב']},
        12: {book: 2,  answers: ['ג']},
        13: {book: 13, answers: ['ד']},
        14: {book: 4,  answers: ['ג']},
        15: {book: 12, answers: ['ב']},
        16: {book: 5,  answers: ['א']},
        17: {book: 5,  answers: ['ד']},
        18: {book: 2,  answers: ['ב']},
        19: {book: 6,  answers: ['ד']},
        20: {book: 2,  answers: ['א']},
        21: {book: 2,  answers: ['ג']},
        22: {book: 11, answers: ['ב']},
        23: {book: 2,  answers: ['ג']},
        24: {book: 6,  answers: ['ג']},
        25: {book: 4,  answers: ['א']},
        26: {book: 9,  answers: ['ד']},
        27: {book: 5,  answers: ['א']},
        28: {book: 2,  answers: ['ב']},
        29: {book: 13, answers: ['א']},
        30: {book: 8,  answers: ['א']},
        31: {book: 2,  answers: ['א']},
        32: {book: 11, answers: ['ד']},
        33: {book: 6,  answers: ['ד']},
        34: {book: 11, answers: ['א']},
        35: {book: 3,  answers: ['ב']},
        36: {book: 12, answers: ['ג']},
        37: {book: 2,  answers: ['א']},
        38: {book: 3,  answers: ['ב']},
        39: {book: 9,  answers: ['ד']},
        40: {book: 10, answers: ['א']},
        41: {book: 4,  answers: ['ד']},
        42: {book: 4,  answers: ['ד']},
        43: {book: 9,  answers: ['א']},
        44: {book: 12, answers: ['ב']},
        45: {book: 6,  answers: ['ד']},
        46: {book: 7,  answers: ['ב']},
        47: {book: 11, answers: ['ד']},
        48: {book: 10, answers: ['ג']},
        49: {book: 3,  answers: ['ד']},
        50: {book: 7,  answers: ['ב']},
        51: {book: 11, answers: ['ג']},
        52: {book: 10, answers: ['ב']},
        53: {book: 12, answers: ['א']},
        54: {book: 4,  answers: ['ג']},
        55: {book: 6,  answers: ['ב']},
        56: {book: 8,  answers: ['ד']},
        57: {book: 3,  answers: ['א']},
        58: {book: 12, answers: ['ב']},
        59: {book: 8,  answers: ['ב']},
        60: {book: 10, answers: ['ג']},
        61: {book: 12, answers: ['ד']},
        62: {book: 9,  answers: ['ב']},
        63: {book: 5,  answers: ['ד']},
        64: {book: 5,  answers: ['ג']},
        65: {book: 10, answers: ['א']},
        66: {book: 10, answers: ['ג']},
        67: {book: 4,  answers: ['ב']},
        68: {book: 2,  answers: ['א']},
        69: {book: 10, answers: ['ג']},
        70: {book: 2,  answers: ['ג']},
        71: {book: 9,  answers: ['ג']},
        72: {book: 12, answers: ['ג']},
        73: {book: 4,  answers: ['ב']},
        74: {book: 3,  answers: ['א']},
        75: {book: 5,  answers: ['ד']},
        76: {book: 6,  answers: ['ב']},
        77: {book: 12, answers: ['ב']},
        78: {book: 2,  answers: ['א']},
        79: {book: 2,  answers: ['ב']},
        80: {book: 6,  answers: ['ג']},
        81: {book: 3,  answers: ['ג']},
        82: {book: 7,  answers: ['ב']},
        83: {book: 2,  answers: ['ב']},
        84: {book: 11, answers: ['ד']},
        85: {book: 6,  answers: ['א']},
        86: {book: 7,  answers: ['ג']},
        87: {book: 7,  answers: ['ב']},
        88: {book: 12, answers: ['ב']},
        89: {book: 4,  answers: ['ד']},
        90: {book: 5,  answers: ['ג']},
        91: {book: 4,  answers: ['ב']},
        92: {book: 3,  answers: ['ד']},
        93: {book: 11, answers: ['ב']},
        94: {book: 11, answers: ['ב']},
        95: {book: 5,  answers: ['א']},
        96: {book: 3,  answers: ['ד']},
        97: {book: 2,  answers: ['ג']},
        98: {book: 13, answers: ['ג']},
        99: {book: 3,  answers: ['ד']},
        100:{book: 2,  answers: ['א']},
        101:{book: 2,  answers: ['ד']},
        102:{book: 9,  answers: ['ד']},
        103:{book: 7,  answers: ['ב']},
        104:{book: 13, answers: ['ד']},
        105:{book: 10, answers: ['א']},
        106:{book: 4,  answers: ['ג']},
        107:{book: 8,  answers: ['א']},
        108:{book: 13, answers: ['ב']},
        109:{book: 2,  answers: ['ד']},
        110:{book: 2,  answers: ['ב']},
        111:{book: 4,  answers: ['ג']},
        112:{book: 7,  answers: ['ד']},
        113:{book: 2,  answers: ['ב']},
        114:{book: 10, answers: ['ד']},
        115:{book: 7,  answers: ['ד']},
        116:{book: 2,  answers: ['א']},
        117:{book: 2,  answers: ['ג']},
        118:{book: 2,  answers: ['ב']},
        119:{book: 3,  answers: ['א']},
        120:{book: 9,  answers: ['א']},
        121:{book: 2,  answers: ['ב']},
        122:{book: 3,  answers: ['א']},
        123:{book: 10, answers: ['ב']},
        124:{book: 2,  answers: ['ד']},
        125:{book: 4,  answers: ['ד']},
        126:{book: 12, answers: ['ג']},
        127:{book: 7,  answers: ['ג']},
        128:{book: 13, answers: ['ד']},
        129:{book: 9,  answers: ['ג']},
        130:{book: 3,  answers: ['ג']},
        131:{book: 6,  answers: ['ד']},
        132:{book: 12, answers: ['ב']},
        133:{book: 8,  answers: ['ד']},
        134:{book: 8,  answers: ['א']},
        135:{book: 7,  answers: ['ב']},
        136:{book: 8,  answers: ['א']},
        137:{book: 5,  answers: ['ד']},
        138:{book: 3,  answers: ['ב']},
        139:{book: 11, answers: ['ב']},
        140:{book: 4,  answers: ['ב']},
        141:{book: 12, answers: ['ב']},
        142:{book: 8,  answers: ['ג']},
        143:{book: 13, answers: ['ג']},
        144:{book: 4,  answers: ['א']},
        145:{book: 6,  answers: ['ב']},
        146:{book: 12, answers: ['ד']},
        147:{book: 4,  answers: ['ג']},
        148:{book: 2,  answers: ['ג']},
        149:{book: 5,  answers: ['ד']},
        150:{book: 8,  answers: ['ד']}

       // Continue with all 150 questions...
     },
     '05-2024': {
       // Add mapping for 05-2024 based on the PDF
        1:  {book: 9,  answers: ['ד']},
        2:  {book: 9,  answers: ['א']},
        3:  {book: 9,  answers: ['א']},
        4:  {book: 9,  answers: ['ב']},
        5:  {book: 9,  answers: ['ד']},
        6:  {book: 9,  answers: ['ג']},
        7:  {book: 9,  answers: ['ג']},
        8:  {book: 9,  answers: ['ד']},
        9:  {book: 3,  answers: ['ג']},
        10: {book: 3,  answers: ['ג']},
        11: {book: 3,  answers: ['ד']},
        12: {book: 3,  answers: ['א']},
        13: {book: 3,  answers: ['ג']},
        14: {book: 3,  answers: ['ב']},
        15: {book: 3,  answers: ['ב']},
        16: {book: 3,  answers: ['ב']},
        17: {book: 3,  answers: ['ד']},
        18: {book: 3,  answers: ['ב']},
        19: {book: 3,  answers: ['א']},
        20: {book: 3,  answers: ['ב']},
        21: {book: 3,  answers: ['ג']},
        22: {book: 3,  answers: ['ב']},
        23: {book: 3,  answers: ['ג']},
        24: {book: 3,  answers: ['ד']},
        25: {book: 5,  answers: ['א']},
        26: {book: 5,  answers: ['א']},
        27: {book: 5,  answers: ['ב']},
        28: {book: 5,  answers: ['ד']},
        29: {book: 5,  answers: ['ד']},
        30: {book: 5,  answers: ['ד']},
        31: {book: 5,  answers: ['ג']},
        32: {book: 5,  answers: ['ג']},
        33: {book: 5,  answers: ['ג']},
        34: {book: 5,  answers: ['ג']},
        35: {book: 6,  answers: ['א']},
        36: {book: 6,  answers: ['א']},
        37: {book: 6,  answers: ['ד']},
        38: {book: 6,  answers: ['ג']},
        39: {book: 6,  answers: ['א']},
        40: {book: 6,  answers: ['ג']},
        41: {book: 6,  answers: ['א']},
        42: {book: 6,  answers: ['ב']},
        43: {book: 6,  answers: ['ד']},
        44: {book: 6,  answers: ['א']},
        45: {book: 13, answers: ['ד']},
        46: {book: 13, answers: ['ב']},
        47: {book: 13, answers: ['ג']},
        48: {book: 13, answers: ['ג']},
        49: {book: 13, answers: ['ג']},
        50: {book: 13, answers: ['ג']},
        51: {book: 13, answers: ['ג']},
        52: {book: 13, answers: ['ב']},
        53: {book: 2,  answers: ['ג']},
        54: {book: 2,  answers: ['ד']},
        55: {book: 2,  answers: ['ב']},
        56: {book: 2,  answers: ['ב']},
        57: {book: 2,  answers: ['ג']},
        58: {book: 2,  answers: ['ד']},
        59: {book: 2,  answers: ['א']},
        60: {book: 2,  answers: ['א']},
        61: {book: 2,  answers: ['ג']},
        62: {book: 2,  answers: ['ד']},
        63: {book: 2,  answers: ['ב']},
        64: {book: 2,  answers: ['א']},
        65: {book: 2,  answers: ['א']},
        66: {book: 2,  answers: ['א']},
        67: {book: 2,  answers: ['ג']},
        68: {book: 2,  answers: ['ג']},
        69: {book: 2,  answers: ['ב']},
        70: {book: 2,  answers: ['ג']},
        71: {book: 2,  answers: ['ב']},
        72: {book: 2,  answers: ['א']},
        73: {book: 2,  answers: ['ג','ד']},
        74: {book: 2,  answers: ['ד']},
        75: {book: 2,  answers: ['א','ב','ג','ד']},
        76: {book: 2,  answers: ['א']},
        77: {book: 2,  answers: ['א']},
        78: {book: 2,  answers: ['ג']},
        79: {book: 2,  answers: ['א']},
        80: {book: 2,  answers: ['ג']},
        81: {book: 7,  answers: ['א']},
        82: {book: 7,  answers: ['ד']},
        83: {book: 7,  answers: ['ב']},
        84: {book: 7,  answers: ['ב']},
        85: {book: 7,  answers: ['ג']},
        86: {book: 7,  answers: ['ג']},
        87: {book: 7,  answers: ['ב','ד']},
        88: {book: 7,  answers: ['ג']},
        89: {book: 7,  answers: ['ב']},
        90: {book: 7,  answers: ['ב']},
        91: {book: 4,  answers: ['א']},
        92: {book: 4,  answers: ['ב']},
        93: {book: 4,  answers: ['ד']},
        94: {book: 4,  answers: ['א']},
        95: {book: 4,  answers: ['ב']},
        96: {book: 4,  answers: ['ב']},
        97: {book: 4,  answers: ['א']},
        98: {book: 4,  answers: ['ג']},
        99: {book: 4,  answers: ['א']},
        100:{book: 4,  answers: ['ג']},
        101:{book: 4,  answers: ['ב']},
        102:{book: 4,  answers: ['ג']},
        103:{book: 4,  answers: ['א']},
        104:{book: 4,  answers: ['ב']},
        105:{book: 4,  answers: ['ג']},
        106:{book: 4,  answers: ['א']},
        107:{book: 11, answers: ['ב']},
        108:{book: 11, answers: ['ג']},
        109:{book: 11, answers: ['ד']},
        110:{book: 11, answers: ['ג']},
        111:{book: 11, answers: ['ג']},
        112:{book: 11, answers: ['ד']},
        113:{book: 11, answers: ['ג']},
        114:{book: 11, answers: ['ב']},
        115:{book: 11, answers: ['ב']},
        116:{book: 11, answers: ['ד']},
        117:{book: 10, answers: ['א']},
        118:{book: 10, answers: ['ד']},
        119:{book: 10, answers: ['א']},
        120:{book: 10, answers: ['ג']},
        121:{book: 10, answers: ['ב','ד']},
        122:{book: 10, answers: ['ב']},
        123:{book: 10, answers: ['ב']},
        124:{book: 10, answers: ['ב']},
        125:{book: 10, answers: ['ב']},
        126:{book: 10, answers: ['ב']},
        127:{book: 12, answers: ['א']},
        128:{book: 12, answers: ['ד']},
        129:{book: 12, answers: ['א']},
        130:{book: 12, answers: ['ד']},
        131:{book: 12, answers: ['ב']},
        132:{book: 12, answers: ['א']},
        133:{book: 12, answers: ['א']},
        134:{book: 12, answers: ['ב']},
        135:{book: 12, answers: ['ג']},
        136:{book: 12, answers: ['ד']},
        137:{book: 12, answers: ['ג']},
        138:{book: 12, answers: ['ד']},
        139:{book: 12, answers: ['ד']},
        140:{book: 12, answers: ['א','ב']},
        141:{book: 8,  answers: ['ב']},
        142:{book: 8,  answers: ['ד']},
        143:{book: 8,  answers: ['ג']},
        144:{book: 8,  answers: ['ג']},
        145:{book: 8,  answers: ['ג']},
        146:{book: 8,  answers: ['א']},
        147:{book: 8,  answers: ['ג']},
        148:{book: 8,  answers: ['ג']},
        149:{book: 8,  answers: ['ג']},
        150:{book: 8,  answers: ['ב']}

       // Continue with all 150 questions...
     },
     '09-2024': {
       // Add mapping for 09-2024 based on the PDF
        1:  {book: 5,  answers: ['א']},
        2:  {book: 6,  answers: ['ג']},
        3:  {book: 3,  answers: ['ד']},
        4:  {book: 9,  answers: ['ב']},
        5:  {book: 5,  answers: ['ב']},
        6:  {book: 6,  answers: ['ג']},
        7:  {book: 9,  answers: ['א']},
        8:  {book: 6,  answers: ['א']},
        9:  {book: 3,  answers: ['ג']},
        10: {book: 7,  answers: ['ב']},
        11: {book: 5,  answers: ['ב']},
        12: {book: 3,  answers: ['ג']},
        13: {book: 6,  answers: ['א']},
        14: {book: 7,  answers: ['ב']},
        15: {book: 9,  answers: ['ד']},
        16: {book: 3,  answers: ['ב']},
        17: {book: 5,  answers: ['ד']},
        18: {book: 6,  answers: ['ב']},
        19: {book: 7,  answers: ['ד']},
        20: {book: 9,  answers: ['ב']},
        21: {book: 3,  answers: ['ג']},
        22: {book: 5,  answers: ['ב']},
        23: {book: 6,  answers: ['ג']},
        24: {book: 7,  answers: ['א']},
        25: {book: 9,  answers: ['ג']},
        26: {book: 3,  answers: ['ד']},
        27: {book: 5,  answers: ['ג']},
        28: {book: 6,  answers: ['ד']},
        29: {book: 7,  answers: ['ד']},
        30: {book: 9,  answers: ['ב']},
        31: {book: 3,  answers: ['א']},
        32: {book: 5,  answers: ['ד']},
        33: {book: 7,  answers: ['ב']},
        34: {book: 6,  answers: ['ג']},
        35: {book: 9,  answers: ['ב']},
        36: {book: 3,  answers: ['ג']},
        37: {book: 5,  answers: ['א']},
        38: {book: 7,  answers: ['ב']},
        39: {book: 6,  answers: ['א']},
        40: {book: 9,  answers: ['ד']},
        41: {book: 5,  answers: ['א']},
        42: {book: 6,  answers: ['ב']},
        43: {book: 7,  answers: ['ד']},
        44: {book: 5,  answers: ['א']},
        45: {book: 3,  answers: ['ג']},
        46: {book: 3,  answers: ['ג']},
        47: {book: 7,  answers: ['א']},
        48: {book: 2,  answers: ['ב']},
        49: {book: 2,  answers: ['ג']},
        50: {book: 2,  answers: ['ג']},
        51: {book: 3,  answers: ['ג']},
        52: {book: 3,  answers: ['ב']},
        53: {book: 3,  answers: ['ב']},
        54: {book: 7,  answers: ['ב']},
        55: {book: 12, answers: ['ג']},
        56: {book: 2,  answers: ['ג']},
        57: {book: 2,  answers: ['ב']},
        58: {book: 2,  answers: ['ג']},
        59: {book: 12, answers: ['א']},
        60: {book: 12, answers: ['ב']},
        61: {book: 12, answers: ['ב']},
        62: {book: 3,  answers: ['ד']},
        63: {book: 3,  answers: ['א']},
        64: {book: 3,  answers: ['ד']},
        65: {book: 11, answers: ['א','ג']},
        66: {book: 11, answers: ['א']},
        67: {book: 11, answers: ['ג']},
        68: {book: 12, answers: ['ג']},
        69: {book: 12, answers: ['ג']},
        70: {book: 12, answers: ['ד']},
        71: {book: 2,  answers: ['ב']},
        72: {book: 2,  answers: ['ד']},
        73: {book: 2,  answers: ['ב']},
        74: {book: 11, answers: ['ב']},
        75: {book: 11, answers: ['ג']},
        76: {book: 11, answers: ['ג']},
        77: {book: 12, answers: ['ג']},
        78: {book: 12, answers: ['ב']},
        79: {book: 12, answers: ['ד']},
        80: {book: 2,  answers: ['א','ב','ג','ד']},
        81: {book: 2,  answers: ['ב']},
        82: {book: 2,  answers: ['ב']},
        83: {book: 11, answers: ['ב']},
        84: {book: 12, answers: ['ב']},
        85: {book: 2,  answers: ['ב']},
        86: {book: 11, answers: ['ג']},
        87: {book: 12, answers: ['ב']},
        88: {book: 2,  answers: ['א']},
        89: {book: 11, answers: ['ב']},
        90: {book: 12, answers: ['ג']},
        91: {book: 2,  answers: ['א']},
        92: {book: 11, answers: ['א']},
        93: {book: 12, answers: ['ב']},
        94: {book: 4,  answers: ['ב','ג']},
        95: {book: 2,  answers: ['ד']},
        96: {book: 2,  answers: ['ג']},
        97: {book: 4,  answers: ['ד']},
        98: {book: 4,  answers: ['א']},
        99: {book: 10, answers: ['ב']},
        100:{book: 8,  answers: ['ד']},
        101:{book: 13, answers: ['א','ד']},
        102:{book: 4,  answers: ['ב']},
        103:{book: 10, answers: ['ג']},
        104:{book: 8,  answers: ['ב']},
        105:{book: 13, answers: ['ג']},
        106:{book: 4,  answers: ['ג']},
        107:{book: 2,  answers: ['ד']},
        108:{book: 2,  answers: ['א']},
        109:{book: 10, answers: ['ב']},
        110:{book: 8,  answers: ['ב']},
        111:{book: 13, answers: ['ד']},
        112:{book: 4,  answers: ['ג']},
        113:{book: 2,  answers: ['א']},
        114:{book: 10, answers: ['ד']},
        115:{book: 8,  answers: ['ד']},
        116:{book: 13, answers: ['ד']},
        117:{book: 4,  answers: ['א']},
        118:{book: 2,  answers: ['ד']},
        119:{book: 10, answers: ['ב']},
        120:{book: 8,  answers: ['ג']},
        121:{book: 13, answers: ['ב']},
        122:{book: 4,  answers: ['ד']},
        123:{book: 2,  answers: ['ג']},
        124:{book: 10, answers: ['ד']},
        125:{book: 8,  answers: ['ד']},
        126:{book: 13, answers: ['א']},
        127:{book: 4,  answers: ['ב']},
        128:{book: 2,  answers: ['ג']},
        129:{book: 10, answers: ['ג']},
        130:{book: 8,  answers: ['א']},
        131:{book: 13, answers: ['ג']},
        132:{book: 4,  answers: ['א','ב','ג','ד']},
        133:{book: 2,  answers: ['ג']},
        134:{book: 10, answers: ['ד']},
        135:{book: 8,  answers: ['ב']},
        136:{book: 13, answers: ['א']},
        137:{book: 4,  answers: ['ג']},
        138:{book: 2,  answers: ['ב']},
        139:{book: 10, answers: ['ד']},
        140:{book: 8,  answers: ['א']},
        141:{book: 4,  answers: ['א']},
        142:{book: 2,  answers: ['ג']},
        143:{book: 10, answers: ['ב']},
        144:{book: 8,  answers: ['ג','ד']},
        145:{book: 4,  answers: ['ד']},
        146:{book: 2,  answers: ['ג']},
        147:{book: 4,  answers: ['ג']},
        148:{book: 2,  answers: ['ב']},
        149:{book: 4,  answers: ['ד']},
        150:{book: 4,  answers: ['א']}

       // Continue with all 150 questions...
     }
   };

   let loadedExamData = {};
   let statistics = {};

   // Initialize the app
   function init() {
     document.getElementById('loading').style.display = 'none';
     document.getElementById('no-data').style.display = 'block';
   }

   // Handle file selection
   function handleFileSelect(event) {
     const files = event.target.files;
     const fileList = document.getElementById('file-list');
     
     for (const file of files) {
       if (file.type === 'application/json') {
         const reader = new FileReader();
         reader.onload = function(e) {
           try {
             const data = JSON.parse(e.target.result);
             processExamData(file.name, data);
             displayFileItem(file.name);
           } catch (error) {
             alert(`שגיאה בקריאת הקובץ ${file.name}`);
             console.error('Error parsing JSON:', error);
           }
         };
         reader.readAsText(file);
       }
     }
   }

   // Process exam data from JSON file
   function processExamData(filename, data) {
     // Try to identify exam from filename or data
     let examId = null;
     
     // Check filename patterns
     for (const id in examConfigs) {
       if (filename.includes(id)) {
         examId = id;
         break;
       }
     }
     
     // If not found in filename, try to match from exam title
     if (!examId && data.examTitle) {
       for (const id in examConfigs) {
         if (data.examTitle.includes(id.replace('-', '.'))) {
           examId = id;
           break;
         }
       }
     }
     
     if (examId && data.selectedAnswers) {
       loadedExamData[examId] = {
         filename: filename,
         selectedAnswers: data.selectedAnswers,
         timestamp: data.timestamp || new Date().toISOString()
       };
       
       // Update correct answers in examConfigs
       if (questionBookMapping[examId]) {
         examConfigs[examId].correctAnswers = questionBookMapping[examId];
       }
       
       refreshData();
     } else {
       alert(`לא ניתן לזהות את הבחינה בקובץ ${filename}`);
     }
   }

   // Display loaded file
   function displayFileItem(filename) {
     const fileList = document.getElementById('file-list');
     const fileItem = document.createElement('div');
     fileItem.className = 'file-item';
     fileItem.innerHTML = `
       <span>${filename}</span>
       <span class="remove-file" onclick="removeFile('${filename}')">×</span>
     `;
     fileList.appendChild(fileItem);
   }

   // Remove file
   function removeFile(filename) {
     // Find and remove the exam data
     for (const examId in loadedExamData) {
       if (loadedExamData[examId].filename === filename) {
         delete loadedExamData[examId];
         break;
       }
     }
     
     // Remove from display
     const fileItems = document.querySelectorAll('.file-item');
     fileItems.forEach(item => {
       if (item.textContent.includes(filename)) {
         item.remove();
       }
     });
     
     refreshData();
   }

   // Calculate statistics
   function calculateStatistics() {
     statistics = {
       overall: {
         totalQuestions: 0,
         totalAnswered: 0,
         totalCorrect: 0,
         totalExams: 0
       },
       byBook: {},
       byExam: {}
     };

     // Initialize book statistics
     for (let book = 2; book <= 13; book++) {
       statistics.byBook[book] = {
         totalQuestions: 0,
         totalAnswered: 0,
         totalCorrect: 0,
         examResults: {}
       };
     }

     // Process each loaded exam
     for (const examId in loadedExamData) {
       if (!examConfigs[examId].correctAnswers) continue;
       
       const examData = loadedExamData[examId];
       const correctAnswers = examConfigs[examId].correctAnswers;
       
       statistics.byExam[examId] = {
         totalQuestions: 0,
         totalAnswered: 0,
         totalCorrect: 0,
         byBook: {}
       };

       // Initialize exam book statistics
       for (let book = 2; book <= 13; book++) {
         statistics.byExam[examId].byBook[book] = {
           totalQuestions: 0,
           totalAnswered: 0,
           totalCorrect: 0
         };
       }

       // Process each question
       for (const questionNum in correctAnswers) {
         const questionData = correctAnswers[questionNum];
         const book = questionData.book;
         const acceptedAnswers = questionData.answers;
         const userAnswer = examData.selectedAnswers[questionNum];

         // Update counters
         statistics.overall.totalQuestions++;
         statistics.byBook[book].totalQuestions++;
         statistics.byExam[examId].totalQuestions++;
         statistics.byExam[examId].byBook[book].totalQuestions++;

         if (userAnswer) {
           statistics.overall.totalAnswered++;
           statistics.byBook[book].totalAnswered++;
           statistics.byExam[examId].totalAnswered++;
           statistics.byExam[examId].byBook[book].totalAnswered++;

           // Check if answer is correct (including multiple accepted answers)
           if (acceptedAnswers.includes(userAnswer)) {
             statistics.overall.totalCorrect++;
             statistics.byBook[book].totalCorrect++;
             statistics.byExam[examId].totalCorrect++;
             statistics.byExam[examId].byBook[book].totalCorrect++;
           }
         }
       }

       statistics.overall.totalExams++;
     }

     // Calculate exam results per book
     for (const examId in statistics.byExam) {
       for (let book = 2; book <= 13; book++) {
         const bookStats = statistics.byExam[examId].byBook[book];
         const percentage = bookStats.totalAnswered > 0 ? 
           Math.round((bookStats.totalCorrect / bookStats.totalAnswered) * 100) : 0;
         
         statistics.byBook[book].examResults[examId] = {
           ...bookStats,
           percentage
         };
       }
     }
   }

   // Display statistics
   function displayStatistics() {
     const hasData = Object.keys(loadedExamData).length > 0;
     
     document.getElementById('loading').style.display = 'none';
     
     if (!hasData) {
       document.getElementById('no-data').style.display = 'block';
       document.getElementById('stats-content').style.display = 'none';
       return;
     }

     document.getElementById('no-data').style.display = 'none';
     document.getElementById('stats-content').style.display = 'block';
     
     displayOverviewStats();
     displayBookStatistics();
     displayExamStatistics();
   }

   // Display overview statistics
   function displayOverviewStats() {
     const overall = statistics.overall;
     const overallPercentage = overall.totalAnswered > 0 ? 
       Math.round((overall.totalCorrect / overall.totalAnswered) * 100) : 0;
     
     const overviewContainer = document.getElementById('overview-stats');
     overviewContainer.innerHTML = `
       <div class="stat-card">
         <div class="stat-number">${overall.totalExams}</div>
         <div class="stat-label">בחינות נטענו</div>
       </div>
       <div class="stat-card">
         <div class="stat-number">${overall.totalAnswered}</div>
         <div class="stat-label">שאלות שנענו</div>
       </div>
       <div class="stat-card">
         <div class="stat-number">${overall.totalCorrect}</div>
         <div class="stat-label">תשובות נכונות</div>
       </div>
       <div class="stat-card">
         <div class="stat-number">${overallPercentage}%</div>
         <div class="stat-label">אחוז הצלחה כללי</div>
       </div>
     `;
   }

   // Display book statistics
   function displayBookStatistics() {
     const bookContainer = document.getElementById('book-statistics');
     bookContainer.innerHTML = '';

     for (let book = 2; book <= 13; book++) {
       const bookStats = statistics.byBook[book];
       if (bookStats.totalQuestions === 0) continue;

       const overallPercentage = bookStats.totalAnswered > 0 ? 
         Math.round((bookStats.totalCorrect / bookStats.totalAnswered) * 100) : 0;

       const bookDiv = document.createElement('div');
       bookDiv.className = 'book-stats';
       
       bookDiv.innerHTML = `
         <div class="book-header" onclick="toggleBook(${book})">
           <div class="book-title">פרק ${book}: ${bookNames[book]}</div>
           <div class="book-summary">
             <span>${bookStats.totalCorrect}/${bookStats.totalAnswered} (${overallPercentage}%)</span>
             <span class="toggle-arrow">▼</span>
           </div>
         </div>
         <div class="book-content" id="book-${book}">
           <div class="exam-row header">
             <div>בחינה</div>
             <div>שאלות</div>
             <div>נענו</div>
             <div>נכונות</div>
             <div>אחוז הצלחה</div>
           </div>
           ${generateExamRows(book)}
         </div>
       `;

       bookContainer.appendChild(bookDiv);
     }
   }

   // Generate exam rows for a book
   function generateExamRows(book) {
     let rows = '';
     
     for (const examId in loadedExamData) {
       const result = statistics.byBook[book].examResults[examId];
       if (!result || result.totalQuestions === 0) continue;

       const percentage = result.percentage;
       let progressClass = '';
       if (percentage < 60) progressClass = 'low';
       else if (percentage < 80) progressClass = 'medium';

       rows += `
         <div class="exam-row">
           <div>${examConfigs[examId].title}</div>
           <div>${result.totalQuestions}</div>
           <div>${result.totalAnswered}</div>
           <div>${result.totalCorrect}</div>
           <div>
             <div class="progress-bar">
               <div class="progress-fill ${progressClass}" style="width: ${percentage}%">
                 ${percentage}%
               </div>
             </div>
           </div>
         </div>
       `;
     }

     return rows || '<div class="exam-row"><div colspan="5" style="text-align: center;">אין נתונים</div></div>';
   }

   // Display exam statistics
   function displayExamStatistics() {
     const examContainer = document.getElementById('exam-statistics');
     examContainer.innerHTML = '';

     for (const examId in statistics.byExam) {
       const examStats = statistics.byExam[examId];
       const overallPercentage = examStats.totalAnswered > 0 ? 
         Math.round((examStats.totalCorrect / examStats.totalAnswered) * 100) : 0;

       const examDiv = document.createElement('div');
       examDiv.className = 'exam-detail';
       
       examDiv.innerHTML = `
         <div class="exam-detail-header" onclick="toggleExam('${examId}')">
           <div class="exam-detail-title">${examConfigs[examId].title}</div>
           <div class="exam-detail-summary">
             <span>${examStats.totalCorrect}/${examStats.totalAnswered} (${overallPercentage}%)</span>
             <span>מתוך ${examStats.totalQuestions} שאלות</span>
             <span class="toggle-arrow">▼</span>
           </div>
         </div>
         <div class="exam-detail-content" id="exam-${examId}">
           <div class="book-row header">
             <div>נושא</div>
             <div>שאלות</div>
             <div>נענו</div>
             <div>נכונות</div>
             <div>אחוז הצלחה</div>
           </div>
           ${generateBookRowsForExam(examId)}
         </div>
       `;

       examContainer.appendChild(examDiv);
     }
   }

   // Generate book rows for an exam
   function generateBookRowsForExam(examId) {
     let rows = '';
     
     for (let book = 2; book <= 13; book++) {
       const bookStats = statistics.byExam[examId].byBook[book];
       if (bookStats.totalQuestions === 0) continue;

       const percentage = bookStats.totalAnswered > 0 ? 
         Math.round((bookStats.totalCorrect / bookStats.totalAnswered) * 100) : 0;
       
       let progressClass = '';
       if (percentage < 60) progressClass = 'low';
       else if (percentage < 80) progressClass = 'medium';

       rows += `
         <div class="book-row">
           <div>פרק ${book}: ${bookNames[book]}</div>
           <div>${bookStats.totalQuestions}</div>
           <div>${bookStats.totalAnswered}</div>
           <div>${bookStats.totalCorrect}</div>
           <div>
             <div class="progress-bar">
               <div class="progress-fill ${progressClass}" style="width: ${percentage}%">
                 ${percentage}%
               </div>
             </div>
           </div>
         </div>
       `;
     }

     return rows || '<div class="book-row"><div colspan="5">אין נתונים עבור בחינה זו</div></div>';
   }

   // Toggle functions
   function toggleBook(book) {
     const content = document.getElementById(`book-${book}`);
     const arrow = content.previousElementSibling.querySelector('.toggle-arrow');
     
     if (content.classList.contains('collapsed')) {
       content.classList.remove('collapsed');
       arrow.classList.remove('collapsed');
     } else {
       content.classList.add('collapsed');
       arrow.classList.add('collapsed');
     }
   }

   function toggleExam(examId) {
     const content = document.getElementById(`exam-${examId}`);
     const arrow = content.previousElementSibling.querySelector('.toggle-arrow');
     
     if (content.classList.contains('collapsed')) {
       content.classList.remove('collapsed');
       arrow.classList.remove('collapsed');
     } else {
       content.classList.add('collapsed');
       arrow.classList.add('collapsed');
     }
   }

   function switchView(view) {
     document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
     document.getElementById(`${view}-tab`).classList.add('active');
     
     document.querySelectorAll('.view-content').forEach(content => content.classList.remove('active'));
     document.getElementById(`${view}-view`).classList.add('active');
   }

   function expandAll() {
     const activeView = document.querySelector('.view-content.active').id;
     
     if (activeView === 'books-view') {
       document.querySelectorAll('.book-content').forEach(content => {
         content.classList.remove('collapsed');
       });
       document.querySelectorAll('.book-header .toggle-arrow').forEach(arrow => {
         arrow.classList.remove('collapsed');
       });
     } else if (activeView === 'exams-view') {
       document.querySelectorAll('.exam-detail-content').forEach(content => {
         content.classList.remove('collapsed');
       });
       document.querySelectorAll('.exam-detail-header .toggle-arrow').forEach(arrow => {
         arrow.classList.remove('collapsed');
       });
     }
   }

   function collapseAll() {
     const activeView = document.querySelector('.view-content.active').id;
     
     if (activeView === 'books-view') {
       document.querySelectorAll('.book-content').forEach(content => {
         content.classList.add('collapsed');
       });
       document.querySelectorAll('.book-header .toggle-arrow').forEach(arrow => {
         arrow.classList.add('collapsed');
       });
     } else if (activeView === 'exams-view') {
       document.querySelectorAll('.exam-detail-content').forEach(content => {
         content.classList.add('collapsed');
       });
       document.querySelectorAll('.exam-detail-header .toggle-arrow').forEach(arrow => {
         arrow.classList.add('collapsed');
       });
     }
   }

   function toggleDebug() {
     const debugPanel = document.getElementById('debug-panel');
     debugPanel.style.display = debugPanel.style.display === 'none' ? 'block' : 'none';
     
     if (debugPanel.style.display === 'block') {
       updateDebugInfo();
     }
   }

   function updateDebugInfo() {
     const debugContent = document.getElementById('debug-content');
     
     let html = '<h4>קבצים שנטענו:</h4>';
     html += '<ul>';
     for (const examId in loadedExamData) {
       const data = loadedExamData[examId];
       const answersCount = Object.keys(data.selectedAnswers).length;
       html += `<li>${examConfigs[examId].title}: ${answersCount} תשובות (${data.filename})</li>`;
     }
     html += '</ul>';
     
     html += '<h4>סטטיסטיקות מחושבות:</h4>';
     html += `<p>בחינות עם נתונים: ${statistics.overall.totalExams}</p>`;
     html += `<p>סה"כ שאלות: ${statistics.overall.totalQuestions}</p>`;
     html += `<p>סה"כ נענו: ${statistics.overall.totalAnswered}</p>`;
     html += `<p>סה"כ נכונות: ${statistics.overall.totalCorrect}</p>`;
     
     debugContent.innerHTML = html;
   }

   function refreshData() {
     document.getElementById('loading').style.display = 'block';
     document.getElementById('stats-content').style.display = 'none';
     document.getElementById('no-data').style.display = 'none';
     
     setTimeout(() => {
       calculateStatistics();
       displayStatistics();
     }, 100);
   }

   function clearAllData() {
     if (confirm('האם אתה בטוח שברצונך למחוק את כל הנתונים?')) {
       loadedExamData = {};
       document.getElementById('file-list').innerHTML = '';
       refreshData();
     }
   }

   // Initialize when page loads
   window.addEventListener('load', init);
 </script>
</body>
</html>
